<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ brand_name }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  </head>
  <body>
    <main class="container">
      <header class="hero">
        <h1>{{ brand_name }}</h1>
        <p class="tagline">{{ tagline }}</p>
      </header>

      <section class="card">
        <h2>Offline MVP demo</h2>
        <p>
          Generates a tiny route-based guide using toy Wikipedia-like data (no API calls).
        </p>
        <div class="row">
          <label>
            Route name
            <input id="routeName" value="web_demo" />
          </label>
          <button id="runBtn" type="button">Generate sample guide</button>
        </div>

        <pre id="output" class="output" aria-live="polite"></pre>
      </section>

      <footer class="footer">
        <span>Tip: `POST /api/mvp` returns JSON (`guide`, `trace`).</span>
      </footer>
    </main>

    <script>
      const runBtn = document.getElementById("runBtn");
      const routeName = document.getElementById("routeName");
      const output = document.getElementById("output");

      async function runMvp() {
        output.textContent = "Runningâ€¦";
        runBtn.disabled = true;
        try {
          const resp = await fetch("/api/mvp", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ route_name: routeName.value || "web_demo" }),
          });
          const data = await resp.json();
          output.textContent = JSON.stringify(data, null, 2);
        } catch (e) {
          output.textContent = String(e);
        } finally {
          runBtn.disabled = false;
        }
      }

      runBtn.addEventListener("click", runMvp);
    </script>
  </body>
</html>

