<?plantuml 1.2026.1?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="ACTIVITY" height="1633.3333px" preserveAspectRatio="none" style="width:1750px;height:1633px;background:#FFFFFF;" version="1.1" viewBox="0 0 1750 1633" width="1750px" zoomAndPan="magnify"><title>ANC &#8212; Future Production Databricks Full App</title><defs/><g><g class="title" data-source-line="17"><text fill="#000000" font-family="sans-serif" font-size="23.3333" font-weight="bold" lengthAdjust="spacing" textLength="550.7145" x="597.9439" y="55.8919">ANC &#8212; Future Production Databricks Full App</text></g><ellipse cx="553.4668" cy="95.8138" fill="#222222" rx="16.6667" ry="16.6667" style="stroke:#222222;stroke-width:1.6667;"/><rect fill="#F8FAFC" height="80.4427" rx="20.8333" ry="20.8333" style="stroke:#334155;stroke-width:0.8333;" width="503.2064" x="301.8636" y="145.8138"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="310.8008" x="318.5303" y="181.8164">Mobile/Web user asks question,</text><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="469.873" x="318.5303" y="205.3711">passes route context, and optionally adds photo</text><rect fill="#F8FAFC" height="56.888" rx="20.8333" ry="20.8333" style="stroke:#334155;stroke-width:0.8333;" width="230.7454" x="438.0941" y="259.5898"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="197.4121" x="454.7607" y="295.5924">[API] receive request</text><rect fill="#F8FAFC" height="56.888" rx="20.8333" ry="20.8333" style="stroke:#334155;stroke-width:0.8333;" width="472.6107" x="317.1615" y="349.8112"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="439.2773" x="333.8281" y="385.8138">[Orchestrator] build retrieval/generation plan</text><rect fill="#F8FAFC" height="56.888" rx="20.8333" ry="20.8333" style="stroke:#334155;stroke-width:0.8333;" width="411.556" x="347.6888" y="440.0326"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="378.2227" x="364.3555" y="476.0352">[Cache] lookup for hot prompts/routes</text><rect fill="#F8FAFC" height="80.4427" rx="20.8333" ry="20.8333" style="stroke:#334155;stroke-width:0.8333;" width="320.5599" x="393.1868" y="530.2539"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="287.2266" x="409.8535" y="566.2565">[Vector Search] retrieve top-k</text><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="240.166" x="409.8535" y="589.8112">(Unity Catalog governed)</text><rect fill="#F8FAFC" height="56.888" rx="20.8333" ry="20.8333" style="stroke:#334155;stroke-width:0.8333;" width="469.222" x="318.8558" y="644.0299"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="435.8887" x="335.5225" y="680.0326">[LLM/Vision endpoints] grounded generation</text><rect fill="#F8FAFC" height="56.888" rx="20.8333" ry="20.8333" style="stroke:#334155;stroke-width:0.8333;" width="525.3158" x="290.8089" y="734.2513"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="491.9824" x="307.4756" y="770.2539">[Policy gate] citation + safety + uncertainty checks</text><rect fill="#F8FAFC" height="56.888" rx="20.8333" ry="20.8333" style="stroke:#334155;stroke-width:0.8333;" width="495.9798" x="305.4769" y="824.4727"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="462.6465" x="322.1436" y="860.4753">[API] return stop cards + citations + confidence</text><rect fill="#555555" height="10" rx="4.1667" ry="4.1667" style="stroke:#555555;stroke-width:1.6667;" width="1073.6003" x="18.3333" y="914.694"/><rect fill="#F8FAFC" height="56.888" rx="20.8333" ry="20.8333" style="stroke:#334155;stroke-width:0.8333;" width="508.7044" x="38.3333" y="958.0273"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="475.3711" x="55" y="994.0299">[Pipelines] ingest from Wikipedia + USGS + Maps</text><rect fill="#F8FAFC" height="56.888" rx="20.8333" ry="20.8333" style="stroke:#334155;stroke-width:0.8333;" width="463.3236" x="61.0238" y="1073.2487"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="429.9902" x="77.6904" y="1109.2513">[Delta + UC] write Bronze/Silver/Gold tables</text><rect fill="#F8FAFC" height="56.888" rx="20.8333" ry="20.8333" style="stroke:#334155;stroke-width:0.8333;" width="504.0169" x="40.6771" y="1188.4701"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="470.6836" x="57.3438" y="1224.4727">[Embedding job] batch upsert from chunk deltas</text><rect fill="#F8FAFC" height="56.888" rx="20.8333" ry="20.8333" style="stroke:#334155;stroke-width:0.8333;" width="335.6771" x="124.847" y="1303.6914"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="302.3438" x="141.5137" y="1339.694">[Vector Search] refresh indexes</text><rect fill="#F8FAFC" height="56.888" rx="20.8333" ry="20.8333" style="stroke:#334155;stroke-width:0.8333;" width="341.0189" x="660.6429" y="1015.638"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="307.6855" x="677.3096" y="1051.6406">[MLflow] tracing + eval artifacts</text><rect fill="#F8FAFC" height="56.888" rx="20.8333" ry="20.8333" style="stroke:#334155;stroke-width:0.8333;" width="474.8958" x="593.7044" y="1130.8594"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="441.5625" x="610.3711" y="1166.862">[Monitoring] quality/latency/drift dashboards</text><rect fill="#F8FAFC" height="56.888" rx="20.8333" ry="20.8333" style="stroke:#334155;stroke-width:0.8333;" width="403.6947" x="629.305" y="1246.0807"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="370.3613" x="645.9717" y="1282.0833">[Jobs] refresh signals from monitoring</text><rect fill="#555555" height="10" rx="4.1667" ry="4.1667" style="stroke:#555555;stroke-width:1.6667;" width="1073.6003" x="18.3333" y="1393.9128"/><rect fill="#F8FAFC" height="103.9974" rx="20.8333" ry="20.8333" style="stroke:#334155;stroke-width:0.8333;" width="499.7493" x="303.5921" y="1437.2461"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="212.8906" x="320.2588" y="1473.2487">[Free Edition controls]</text><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="466.416" x="320.2588" y="1496.8034">batch refresh windows + strict top-k budgets +</text><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="443.5938" x="320.2588" y="1520.3581">smaller default model tier + aggressive cache</text><path d="M605.1335,1571.818 L605.1335,1586.2435 L571.8001,1592.9102 L605.1335,1599.5768 L605.1335,1614.0023 A0,0 0 0 0 605.1335,1614.0023 L1731.6024,1614.0023 A0,0 0 0 0 1731.6024,1614.0023 L1731.6024,1588.4847 L1714.9357,1571.818 L605.1335,1571.818 A0,0 0 0 0 605.1335,1571.818" fill="#FFFBEB" style="stroke:#B45309;stroke-width:0.8333;"/><path d="M1714.9357,1571.818 L1714.9357,1588.4847 L1731.6024,1588.4847 L1714.9357,1571.818" fill="#FFFBEB" style="stroke:#B45309;stroke-width:0.8333;"/><text fill="#92400E" font-family="sans-serif" font-size="21.6667" lengthAdjust="spacing" textLength="1091.4689" x="615.1335" y="1601.0986">Real-data path replaces fallback retrieval adapters,\nwhile preserving output schema and quality gates.</text><ellipse cx="553.4668" cy="1592.9102" fill="none" rx="18.3333" ry="18.3333" style="stroke:#222222;stroke-width:1.6667;"/><ellipse cx="553.4668" cy="1592.9102" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="553.4668" x2="553.4668" y1="112.4805" y2="145.8138"/><polygon fill="#334155" points="546.8001,129.1471,553.4668,145.8138,560.1335,129.1471,553.4668,135.8138" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="553.4668" x2="553.4668" y1="226.2565" y2="259.5898"/><polygon fill="#334155" points="546.8001,242.9232,553.4668,259.5898,560.1335,242.9232,553.4668,249.5898" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="553.4668" x2="553.4668" y1="316.4779" y2="349.8112"/><polygon fill="#334155" points="546.8001,333.1445,553.4668,349.8112,560.1335,333.1445,553.4668,339.8112" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="553.4668" x2="553.4668" y1="406.6992" y2="440.0326"/><polygon fill="#334155" points="546.8001,423.3659,553.4668,440.0326,560.1335,423.3659,553.4668,430.0326" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="553.4668" x2="553.4668" y1="496.9206" y2="530.2539"/><polygon fill="#334155" points="546.8001,513.5872,553.4668,530.2539,560.1335,513.5872,553.4668,520.2539" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="553.4668" x2="553.4668" y1="610.6966" y2="644.0299"/><polygon fill="#334155" points="546.8001,627.3633,553.4668,644.0299,560.1335,627.3633,553.4668,634.0299" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="553.4668" x2="553.4668" y1="700.918" y2="734.2513"/><polygon fill="#334155" points="546.8001,717.5846,553.4668,734.2513,560.1335,717.5846,553.4668,724.2513" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="553.4668" x2="553.4668" y1="791.1393" y2="824.4727"/><polygon fill="#334155" points="546.8001,807.806,553.4668,824.4727,560.1335,807.806,553.4668,814.4727" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="292.6855" x2="292.6855" y1="1014.9154" y2="1073.2487"/><polygon fill="#334155" points="286.0189,1056.582,292.6855,1073.2487,299.3522,1056.582,292.6855,1063.2487" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="292.6855" x2="292.6855" y1="1130.1367" y2="1188.4701"/><polygon fill="#334155" points="286.0189,1171.8034,292.6855,1188.4701,299.3522,1171.8034,292.6855,1178.4701" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="292.6855" x2="292.6855" y1="1245.3581" y2="1303.6914"/><polygon fill="#334155" points="286.0189,1287.0247,292.6855,1303.6914,299.3522,1287.0247,292.6855,1293.6914" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="831.1523" x2="831.1523" y1="1072.526" y2="1130.8594"/><polygon fill="#334155" points="824.4857,1114.1927,831.1523,1130.8594,837.819,1114.1927,831.1523,1120.8594" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="831.1523" x2="831.1523" y1="1187.7474" y2="1246.0807"/><polygon fill="#334155" points="824.4857,1229.4141,831.1523,1246.0807,837.819,1229.4141,831.1523,1236.0807" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="292.6855" x2="292.6855" y1="924.694" y2="958.0273"/><polygon fill="#334155" points="286.0189,941.3607,292.6855,958.0273,299.3522,941.3607,292.6855,948.0273" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="831.1523" x2="831.1523" y1="924.694" y2="1015.638"/><polygon fill="#334155" points="824.4857,998.9714,831.1523,1015.638,837.819,998.9714,831.1523,1005.638" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="292.6855" x2="292.6855" y1="1360.5794" y2="1393.9128"/><polygon fill="#334155" points="286.0189,1377.2461,292.6855,1393.9128,299.3522,1377.2461,292.6855,1383.9128" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="831.1523" x2="831.1523" y1="1302.9688" y2="1393.9128"/><polygon fill="#334155" points="824.4857,1377.2461,831.1523,1393.9128,837.819,1377.2461,831.1523,1383.9128" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="553.4668" x2="553.4668" y1="881.3607" y2="914.694"/><polygon fill="#334155" points="546.8001,898.0273,553.4668,914.694,560.1335,898.0273,553.4668,904.694" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="553.4668" x2="553.4668" y1="1403.9128" y2="1437.2461"/><polygon fill="#334155" points="546.8001,1420.5794,553.4668,1437.2461,560.1335,1420.5794,553.4668,1427.2461" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="553.4668" x2="553.4668" y1="1541.2435" y2="1574.5768"/><polygon fill="#334155" points="546.8001,1557.9102,553.4668,1574.5768,560.1335,1557.9102,553.4668,1564.5768" style="stroke:#334155;stroke-width:1.6667;"/><?plantuml-src TLJRSXit37tVhy1CNvfHKictDh6V9DdAj6ErdZg97-9zu9BONKOKoP9SAMgdC_c8V66_f8UhZQtSzB8Q0ZW0pW4GLzfw4SIQOYkKsshRK2rCv28-M2eXLqrmdLLpProW7nRzxy13SIqwarxn-pGrkh5hjeaCr-dGnsiw-dboy38DmMq7o9EJqwEpio-D2sVJznoiIqp_54IpRvGtkvfbYmkAm_0wEpqxcRp0wm7eY-FJoUIg-FS0LiYaDphjlWFzV35TpB-47chx37goEFhbU0hef9DXclu-f_y-VAH5bxh0T1ESwf39MReKILH1orM4qHYQUbyKCOcGYlEbgxJXyHrNr4KE92Ay_keuviYdzoWvHew42i65H788y9I4LUHyTX76x4We5SctBhcBulpjzERNaW9BrXl6jmVBxty4sU9l4Cc5agfE6mLp2fetmemRjWnJhjSRONF0N22W9EFSglDKesUa81_SsgSuxakAsUyDIq3IBGjaA3zXCYNddwtkxO-lRMPx3XQCQwXn6mwMrPCSUdsz7B_HCMTbgxpJDiMIzeAmeiUYilEDCrhkg149LKcTzjMEA8gQaM14dPKSaW38Zb0w23_W0wfOYgY9f0ZWQ_G0qVztjjQA0N1H56Xr1QsHKNissZ9gmjg0FAhHFTtf5GnA2mI-ldrvYyzIU2JBCPTiKc-ObxGD6hBDWhD_y_XM6tG-Vkd0EmR2y11mjQvOgRoMxrm5OKIIBNKUqp2aasrdLzX0u0uXNp5U1uujQbJyFiFc1aWqOA9tNrxNncrBWlOovnbHbfmmWBh6DWoWImUTN813YGaK1gAD3RYsSZTMGTU9b8XjvJ9x-uZVN1KViqUS1ToLVSth1x2B0ifIJod4M0HckbAwboxFSt0cblTst_KdA1mfNAgi2-PLoxGV9SoiQZZX-Tx6DIOV-pBS9UG3FvGqdaRel05CpFClymnV55dtekWFIj1Dcue_MPXd2YD9NgIS64CliMYuZ2PVmyVDm7O9dpX4REEsnR9Y0nZYR3AJs07V9Of8iXRzMWxCzLCQV-fxpscB_m40?></g></svg>