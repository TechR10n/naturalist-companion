<?plantuml 1.2026.1?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="ACTIVITY" height="1660px" preserveAspectRatio="none" style="width:626px;height:1660px;background:#FFFFFF;" version="1.1" viewBox="0 0 626 1660" width="626.6667px" zoomAndPan="magnify"><title>ANC &#8212; Offline LangGraph Route Guide Flow</title><defs/><g><g class="title" data-source-line="2"><text fill="#000000" font-family="sans-serif" font-size="23.3333" font-weight="bold" lengthAdjust="spacing" textLength="529.3636" x="46.5031" y="55.8919">ANC &#8212; Offline LangGraph Route Guide Flow</text></g><ellipse cx="313.6849" cy="95.8138" fill="#222222" rx="16.6667" ry="16.6667" style="stroke:#222222;stroke-width:1.6667;"/><rect fill="#F8FAFC" height="56.888" rx="10" ry="10" style="stroke:#334155;stroke-width:0.8333;" width="154.3197" x="236.5251" y="145.8138"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="120.9863" x="253.1917" y="181.8164">ingest_route</text><rect fill="#F8FAFC" height="56.888" rx="10" ry="10" style="stroke:#334155;stroke-width:0.8333;" width="173.4993" x="226.9352" y="236.0352"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="140.166" x="243.6019" y="272.0378">sample_points</text><rect fill="#F8FAFC" height="56.888" rx="10" ry="10" style="stroke:#334155;stroke-width:0.8333;" width="228.6263" x="199.3717" y="326.2565"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="195.293" x="216.0384" y="362.2591">discover_candidates</text><rect fill="#F8FAFC" height="56.888" rx="10" ry="10" style="stroke:#334155;stroke-width:0.8333;" width="251.1751" x="188.0973" y="416.4779"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="217.8418" x="204.764" y="452.4805">fetch_and_filter_pages</text><rect fill="#F8FAFC" height="56.888" rx="10" ry="10" style="stroke:#334155;stroke-width:0.8333;" width="152.0638" x="237.653" y="506.6992"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="118.7305" x="254.3197" y="542.7018">select_stops</text><rect fill="#F8FAFC" height="56.888" rx="10" ry="10" style="stroke:#334155;stroke-width:0.8333;" width="146.6732" x="240.3483" y="596.9206"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="113.3398" x="257.015" y="632.9232">build_index</text><rect fill="#F8FAFC" height="56.888" rx="10" ry="10" style="stroke:#334155;stroke-width:0.8333;" width="106.7415" x="260.3141" y="687.1419"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="73.4082" x="276.9808" y="723.1445">retrieve</text><rect fill="#F8FAFC" height="56.888" rx="10" ry="10" style="stroke:#334155;stroke-width:0.8333;" width="185.9408" x="220.7145" y="777.3633"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="152.6074" x="237.3812" y="813.3659">write_stop_card</text><rect fill="#F8FAFC" height="56.888" rx="10" ry="10" style="stroke:#334155;stroke-width:0.8333;" width="213.1576" x="207.1061" y="867.5846"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="179.8242" x="223.7728" y="903.5872">validate_stop_card</text><polygon fill="#F8FAFC" points="287.6217,957.806,339.7481,957.806,359.7481,977.806,339.7481,997.806,287.6217,997.806,267.6217,977.806,287.6217,957.806" style="stroke:#334155;stroke-width:0.8333;"/><text fill="#0F172A" font-family="sans-serif" font-size="18.3333" lengthAdjust="spacing" textLength="52.1265" x="287.6217" y="984.7347">done?</text><text fill="#334155" font-family="sans-serif" font-size="18.3333" lengthAdjust="spacing" textLength="77.1558" x="190.4659" y="973.9388">continue</text><text fill="#334155" font-family="sans-serif" font-size="18.3333" lengthAdjust="spacing" textLength="44.3921" x="359.7481" y="973.9388">done</text><rect fill="#F8FAFC" height="56.888" rx="10" ry="10" style="stroke:#334155;stroke-width:0.8333;" width="278.6849" x="18.3333" y="1014.4727"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="245.3516" x="35" y="1050.4753">accumulate_and_advance</text><rect fill="#F8FAFC" height="56.888" rx="10" ry="10" style="stroke:#334155;stroke-width:0.8333;" width="106.7415" x="104.305" y="1104.694"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="73.4082" x="120.9717" y="1140.6966">retrieve</text><rect fill="#F8FAFC" height="56.888" rx="10" ry="10" style="stroke:#334155;stroke-width:0.8333;" width="185.9408" x="64.7054" y="1194.9154"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="152.6074" x="81.3721" y="1230.918">write_stop_card</text><rect fill="#F8FAFC" height="56.888" rx="10" ry="10" style="stroke:#334155;stroke-width:0.8333;" width="213.1576" x="51.097" y="1285.1367"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="179.8242" x="67.7637" y="1321.1393">validate_stop_card</text><rect fill="#F8FAFC" height="56.888" rx="10" ry="10" style="stroke:#334155;stroke-width:0.8333;" width="278.6849" x="18.3333" y="1375.3581"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="245.3516" x="35" y="1411.3607">accumulate_and_advance</text><rect fill="#F8FAFC" height="56.888" rx="10" ry="10" style="stroke:#334155;stroke-width:0.8333;" width="278.6849" x="330.3516" y="1014.4727"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="245.3516" x="347.0182" y="1050.4753">accumulate_and_advance</text><polygon fill="#F8FAFC" points="313.6849,1442.2461,333.6849,1462.2461,313.6849,1482.2461,293.6849,1462.2461,313.6849,1442.2461" style="stroke:#334155;stroke-width:0.8333;"/><rect fill="#F8FAFC" height="56.888" rx="10" ry="10" style="stroke:#334155;stroke-width:0.8333;" width="181.8392" x="222.7653" y="1515.5794"/><text fill="#0F172A" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="148.5059" x="239.432" y="1551.582">render_outputs</text><ellipse cx="313.6849" cy="1624.1341" fill="none" rx="18.3333" ry="18.3333" style="stroke:#222222;stroke-width:1.6667;"/><ellipse cx="313.6849" cy="1624.1341" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="313.6849" x2="313.6849" y1="112.4805" y2="145.8138"/><polygon fill="#334155" points="307.0182,129.1471,313.6849,145.8138,320.3516,129.1471,313.6849,135.8138" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="313.6849" x2="313.6849" y1="202.7018" y2="236.0352"/><polygon fill="#334155" points="307.0182,219.3685,313.6849,236.0352,320.3516,219.3685,313.6849,226.0352" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="313.6849" x2="313.6849" y1="292.9232" y2="326.2565"/><polygon fill="#334155" points="307.0182,309.5898,313.6849,326.2565,320.3516,309.5898,313.6849,316.2565" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="313.6849" x2="313.6849" y1="383.1445" y2="416.4779"/><polygon fill="#334155" points="307.0182,399.8112,313.6849,416.4779,320.3516,399.8112,313.6849,406.4779" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="313.6849" x2="313.6849" y1="473.3659" y2="506.6992"/><polygon fill="#334155" points="307.0182,490.0326,313.6849,506.6992,320.3516,490.0326,313.6849,496.6992" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="313.6849" x2="313.6849" y1="563.5872" y2="596.9206"/><polygon fill="#334155" points="307.0182,580.2539,313.6849,596.9206,320.3516,580.2539,313.6849,586.9206" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="313.6849" x2="313.6849" y1="653.8086" y2="687.1419"/><polygon fill="#334155" points="307.0182,670.4753,313.6849,687.1419,320.3516,670.4753,313.6849,677.1419" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="313.6849" x2="313.6849" y1="744.0299" y2="777.3633"/><polygon fill="#334155" points="307.0182,760.6966,313.6849,777.3633,320.3516,760.6966,313.6849,767.3633" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="313.6849" x2="313.6849" y1="834.2513" y2="867.5846"/><polygon fill="#334155" points="307.0182,850.918,313.6849,867.5846,320.3516,850.918,313.6849,857.5846" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="157.6758" x2="157.6758" y1="1071.3607" y2="1104.694"/><polygon fill="#334155" points="151.0091,1088.0273,157.6758,1104.694,164.3424,1088.0273,157.6758,1094.694" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="157.6758" x2="157.6758" y1="1161.582" y2="1194.9154"/><polygon fill="#334155" points="151.0091,1178.2487,157.6758,1194.9154,164.3424,1178.2487,157.6758,1184.9154" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="157.6758" x2="157.6758" y1="1251.8034" y2="1285.1367"/><polygon fill="#334155" points="151.0091,1268.4701,157.6758,1285.1367,164.3424,1268.4701,157.6758,1275.1367" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="157.6758" x2="157.6758" y1="1342.0247" y2="1375.3581"/><polygon fill="#334155" points="151.0091,1358.6914,157.6758,1375.3581,164.3424,1358.6914,157.6758,1365.3581" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="267.6217" x2="157.6758" y1="977.806" y2="977.806"/><line style="stroke:#334155;stroke-width:1.6667;" x1="157.6758" x2="157.6758" y1="977.806" y2="1014.4727"/><polygon fill="#334155" points="151.0091,997.806,157.6758,1014.4727,164.3424,997.806,157.6758,1004.4727" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="359.7481" x2="469.694" y1="977.806" y2="977.806"/><line style="stroke:#334155;stroke-width:1.6667;" x1="469.694" x2="469.694" y1="977.806" y2="1014.4727"/><polygon fill="#334155" points="463.0273,997.806,469.694,1014.4727,476.3607,997.806,469.694,1004.4727" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="157.6758" x2="157.6758" y1="1432.2461" y2="1462.2461"/><line style="stroke:#334155;stroke-width:1.6667;" x1="157.6758" x2="293.6849" y1="1462.2461" y2="1462.2461"/><polygon fill="#334155" points="277.0182,1455.5794,293.6849,1462.2461,277.0182,1468.9128,283.6849,1462.2461" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="469.694" x2="469.694" y1="1071.3607" y2="1462.2461"/><line style="stroke:#334155;stroke-width:1.6667;" x1="469.694" x2="333.6849" y1="1462.2461" y2="1462.2461"/><polygon fill="#334155" points="350.3516,1455.5794,333.6849,1462.2461,350.3516,1468.9128,343.6849,1462.2461" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="313.6849" x2="313.6849" y1="924.4727" y2="957.806"/><polygon fill="#334155" points="307.0182,941.1393,313.6849,957.806,320.3516,941.1393,313.6849,947.806" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="313.6849" x2="313.6849" y1="1482.2461" y2="1515.5794"/><polygon fill="#334155" points="307.0182,1498.9128,313.6849,1515.5794,320.3516,1498.9128,313.6849,1505.5794" style="stroke:#334155;stroke-width:1.6667;"/><line style="stroke:#334155;stroke-width:1.6667;" x1="313.6849" x2="313.6849" y1="1572.4674" y2="1605.8008"/><polygon fill="#334155" points="307.0182,1589.1341,313.6849,1605.8008,320.3516,1589.1341,313.6849,1595.8008" style="stroke:#334155;stroke-width:1.6667;"/><?plantuml-src VL0nJWGn3EppYj3TDJnWAH12uXe44X-8GkBiMl8wKUBiKV88NiXBS9O29D2LCsFFs7E57AX7i2xaTSryNVfAHb08xDtJlVry_x3FAH4os4VFywdwijYNt0NigQCkFb0-6zF4Lp4JyWnDN1twZPcQNmk1AnbPckA8BUGDgWkU8qOlCDW44XQdZ4j8echnyouq80ZYckGou6j7YWuvmfkY2b8HjX5phYYmZwbnZSfiddRxtwJ1P0ynCzmUhIp0zX0o2tA7ex5syY7qjTDO6gVuk7aEwgxIJvI2Fs7A_HTtmHAemVSf5vD1EqfcVAelLwUTbZvg727c2m00?></g></svg>